<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Puzzle RGB Multiopción</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }
    canvas {
      margin-top: 20px;
      border: 2px solid white;
    }
    button, input[type='color'] {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>¿Cuál es la serie favorita de Rokio?</h1>
  <p>Elige un color de fondo y aplica filtros RGB. Solo una opción se revela correctamente.</p>

  <input type="color" id="bgPicker" value="#ff00ff" />
  <button onclick="setBackground()">Cambiar Fondo</button><br/>
  <button onclick="applyFilter('r')">Luz Roja</button>
  <button onclick="applyFilter('g')">Luz Verde</button>
  <button onclick="applyFilter('b')">Luz Azul</button>
  <button onclick="resetImage()">Sin Filtro</button>

  <canvas id="puzzleCanvas" width="800" height="300"></canvas>

  <script>
    const canvas = document.getElementById("puzzleCanvas");
    const ctx = canvas.getContext("2d");

    const bgPicker = document.getElementById("bgPicker");
    let bgColor = bgPicker.value;

    // Trozos de las opciones, alternando colores RGB
    const options = [
      { text: "SMILING FRIENDS", x: 10, y: 20 },
      { text: "HORA DE AVENTURAS", x: 10, y: 80 },
      { text: "HOUSE", x: 10, y: 140 },
      { text: "SOUTH PARK", x: 10, y: 200 },
      { text: "FARGO", x: 400, y: 20 },
      { text: "MORAL OREL", x: 400, y: 80 }, // correcta
    ];

    const colors = [
      [255, 0, 0],   // rojo
      [0, 255, 0],   // verde
      [0, 0, 255]    // azul
    ];

    // Dibujar opciones troceadas
    function drawPuzzle() {
      ctx.fillStyle = bgColor;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.font = "20px monospace";

      for (const opt of options) {
        for (let i = 0; i < opt.text.length; i++) {
          const [r, g, b] = colors[i % 3];
          ctx.fillStyle = `rgb(${r},${g},${b})`;
          ctx.fillText(opt.text[i], opt.x + i * 18, opt.y);
        }
      }

      // Distracción con símbolos
      const symbols = ["#", "*", "$", "@", "%", "&"];
      for (let i = 0; i < 200; i++) {
        const sym = symbols[Math.floor(Math.random() * symbols.length)];
        const [r, g, b] = colors[Math.floor(Math.random() * 3)];
        ctx.fillStyle = `rgb(${r},${g},${b})`;
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        ctx.fillText(sym, x, y);
      }
    }

    function setBackground() {
      bgColor = bgPicker.value;
      drawPuzzle();
    }

    function resetImage() {
      drawPuzzle();
    }

    function applyFilter(channel) {
      drawPuzzle();
      let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      let data = imageData.data;

      for (let i = 0; i < data.length; i += 4) {
        if (channel === 'r') {
          data[i + 1] = 0;
          data[i + 2] = 0;
        } else if (channel === 'g') {
          data[i] = 0;
          data[i + 2] = 0;
        } else if (channel === 'b') {
          data[i] = 0;
          data[i + 1] = 0;
        }
      }
      ctx.putImageData(imageData, 0, 0);
    }

    // Inicializar
    drawPuzzle();
  </script>
</body>
</html>